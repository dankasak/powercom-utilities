{
   "config" : {
      "data" : [
         {
            "TARGET_SCHEMA_NAME" : null,
            "DISABLE_FLAG" : 0,
            "PARENT_SEQUENCE_ORDER" : 0,
            "TARGET_TABLE_NAME" : null,
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "ON_ERROR_CONTINUE" : 0,
            "TEMPLATE_NAME" : "SQL_Q_PARAMS",
            "VERIFIED" : 0,
            "TARGET_DB_NAME" : null,
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "SOURCE_DB_NAME" : "powercom",
            "SEQUENCE_ORDER" : 1,
            "AUTOGENERATED" : 0,
            "CONNECTION_NAME" : "powercom",
            "NOTES" : "",
            "SOURCE_SCHEMA_NAME" : "public",
            "SOURCE_TABLE_NAME" : "powershop_raw"
         },
         {
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : null,
            "PARENT_SEQUENCE_ORDER" : 0,
            "TARGET_TABLE_NAME" : null,
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TEMPLATE_NAME" : "WWW_MECHANIZE",
            "ON_ERROR_CONTINUE" : 0,
            "TARGET_DB_NAME" : null,
            "VERIFIED" : 0,
            "BEGIN_TRANSACTION" : 0,
            "COMMIT_STEP" : 0,
            "SOURCE_DB_NAME" : "Memory",
            "SEQUENCE_ORDER" : 2,
            "AUTOGENERATED" : 0,
            "CONNECTION_NAME" : "Memory",
            "NOTES" : "",
            "SOURCE_SCHEMA_NAME" : null,
            "SOURCE_TABLE_NAME" : null
         },
         {
            "NOTES" : "",
            "SOURCE_SCHEMA_NAME" : null,
            "SOURCE_TABLE_NAME" : null,
            "SOURCE_DB_NAME" : null,
            "SEQUENCE_ORDER" : 3,
            "AUTOGENERATED" : 0,
            "CONNECTION_NAME" : "Memory",
            "ON_ERROR_CONTINUE" : 0,
            "TEMPLATE_NAME" : "WWW_MECHANIZE",
            "VERIFIED" : 0,
            "TARGET_DB_NAME" : "Memory",
            "BEGIN_TRANSACTION" : 0,
            "COMMIT_STEP" : 0,
            "TARGET_SCHEMA_NAME" : null,
            "DISABLE_FLAG" : 0,
            "PARENT_SEQUENCE_ORDER" : 0,
            "TARGET_TABLE_NAME" : null,
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "SOURCE_TABLE_NAME" : null,
            "SOURCE_SCHEMA_NAME" : null,
            "NOTES" : "1\nSanitise the input file. I haven't seen anything bad yet,\nbut it doesn't hurt to check anyway ...",
            "CONNECTION_NAME" : "powercom",
            "AUTOGENERATED" : 1,
            "SOURCE_DB_NAME" : null,
            "SEQUENCE_ORDER" : 4,
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "VERIFIED" : 0,
            "TARGET_DB_NAME" : "powercom",
            "ON_ERROR_CONTINUE" : 0,
            "TEMPLATE_NAME" : "DATACOP",
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TARGET_TABLE_NAME" : "powershop_raw",
            "PARENT_SEQUENCE_ORDER" : 0,
            "TARGET_SCHEMA_NAME" : "staging",
            "DISABLE_FLAG" : 0
         },
         {
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : "staging",
            "PARENT_SEQUENCE_ORDER" : 0,
            "TARGET_TABLE_NAME" : "powershop_raw",
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "ON_ERROR_CONTINUE" : 0,
            "TEMPLATE_NAME" : "TRUNCATE_TABLE",
            "TARGET_DB_NAME" : "powercom",
            "VERIFIED" : 0,
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "SEQUENCE_ORDER" : 5,
            "SOURCE_DB_NAME" : null,
            "AUTOGENERATED" : 1,
            "CONNECTION_NAME" : "powercom",
            "NOTES" : "2",
            "SOURCE_SCHEMA_NAME" : null,
            "SOURCE_TABLE_NAME" : null
         },
         {
            "CONNECTION_NAME" : "powercom",
            "SOURCE_DB_NAME" : null,
            "SEQUENCE_ORDER" : 6,
            "AUTOGENERATED" : 1,
            "SOURCE_TABLE_NAME" : null,
            "NOTES" : "3",
            "SOURCE_SCHEMA_NAME" : null,
            "TARGET_TABLE_NAME" : "powershop_raw",
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : "staging",
            "PARENT_SEQUENCE_ORDER" : 0,
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "TEMPLATE_NAME" : "POSTGRES_9_X_LOAD_REMOTE",
            "ON_ERROR_CONTINUE" : 0,
            "TARGET_DB_NAME" : "powercom",
            "VERIFIED" : 0
         },
         {
            "SOURCE_DB_NAME" : "powercom",
            "SEQUENCE_ORDER" : 7,
            "AUTOGENERATED" : 0,
            "CONNECTION_NAME" : "powercom",
            "NOTES" : "4\nEverything under this iterator deletes\nany pre-existing data, by date detected\nin the current input file",
            "SOURCE_SCHEMA_NAME" : "staging",
            "SOURCE_TABLE_NAME" : "powershop_raw",
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : null,
            "PARENT_SEQUENCE_ORDER" : 0,
            "TARGET_TABLE_NAME" : null,
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TEMPLATE_NAME" : "SQL_ITERATOR",
            "ON_ERROR_CONTINUE" : 0,
            "TARGET_DB_NAME" : null,
            "VERIFIED" : 0,
            "BEGIN_TRANSACTION" : 0,
            "COMMIT_STEP" : 0
         },
         {
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "TEMPLATE_NAME" : "GENERIC_SQL",
            "ON_ERROR_CONTINUE" : 0,
            "TARGET_DB_NAME" : "powercom",
            "VERIFIED" : 0,
            "TARGET_TABLE_NAME" : "powershop_raw",
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : "public",
            "PARENT_SEQUENCE_ORDER" : 7,
            "SOURCE_TABLE_NAME" : null,
            "NOTES" : "5 ( under 4 )",
            "SOURCE_SCHEMA_NAME" : null,
            "CONNECTION_NAME" : "powercom",
            "SEQUENCE_ORDER" : 8,
            "SOURCE_DB_NAME" : null,
            "AUTOGENERATED" : 0
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TARGET_TABLE_NAME" : null,
            "PARENT_SEQUENCE_ORDER" : 7,
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : null,
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "TARGET_DB_NAME" : null,
            "VERIFIED" : 0,
            "TEMPLATE_NAME" : "STRING_ITERATOR",
            "ON_ERROR_CONTINUE" : 0,
            "CONNECTION_NAME" : "Memory",
            "AUTOGENERATED" : 0,
            "SEQUENCE_ORDER" : 9,
            "SOURCE_DB_NAME" : null,
            "SOURCE_TABLE_NAME" : null,
            "SOURCE_SCHEMA_NAME" : null,
            "NOTES" : "6 ( under 4 )"
         },
         {
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "TARGET_DB_NAME" : "powercom",
            "VERIFIED" : 0,
            "TEMPLATE_NAME" : "GENERIC_SQL",
            "ON_ERROR_CONTINUE" : 0,
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TARGET_TABLE_NAME" : "powercom_readings",
            "PARENT_SEQUENCE_ORDER" : 9,
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : "public",
            "SOURCE_TABLE_NAME" : null,
            "SOURCE_SCHEMA_NAME" : null,
            "NOTES" : "7 ( under 6 )",
            "CONNECTION_NAME" : "powercom",
            "AUTOGENERATED" : 0,
            "SEQUENCE_ORDER" : 10,
            "SOURCE_DB_NAME" : null
         },
         {
            "NOTES" : "8",
            "SOURCE_SCHEMA_NAME" : "staging",
            "SOURCE_TABLE_NAME" : "powershop_raw",
            "SOURCE_DB_NAME" : "powercom",
            "SEQUENCE_ORDER" : 11,
            "AUTOGENERATED" : 1,
            "CONNECTION_NAME" : "powercom",
            "TEMPLATE_NAME" : "INSERT_SRC_TGT_DB_SCHEMA_TABLE",
            "ON_ERROR_CONTINUE" : 0,
            "VERIFIED" : 0,
            "TARGET_DB_NAME" : "powercom",
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 1,
            "TARGET_SCHEMA_NAME" : "public",
            "DISABLE_FLAG" : 0,
            "PARENT_SEQUENCE_ORDER" : 0,
            "TARGET_TABLE_NAME" : "powershop_raw",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "SEQUENCE_ORDER" : 12,
            "SOURCE_DB_NAME" : "memory",
            "AUTOGENERATED" : 0,
            "CONNECTION_NAME" : "Memory",
            "NOTES" : "9\nEverything under this iterator does the inserting ...\n ... this particular iterator loops over the types of\nsource data we deal with.",
            "SOURCE_SCHEMA_NAME" : null,
            "SOURCE_TABLE_NAME" : null,
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : null,
            "PARENT_SEQUENCE_ORDER" : 0,
            "TARGET_TABLE_NAME" : null,
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TEMPLATE_NAME" : "STRING_ITERATOR",
            "ON_ERROR_CONTINUE" : 0,
            "TARGET_DB_NAME" : null,
            "VERIFIED" : 0,
            "BEGIN_TRANSACTION" : 0,
            "COMMIT_STEP" : 0
         },
         {
            "CONNECTION_NAME" : "Memory",
            "SOURCE_DB_NAME" : "memory",
            "SEQUENCE_ORDER" : 13,
            "AUTOGENERATED" : 0,
            "SOURCE_TABLE_NAME" : null,
            "NOTES" : "10 ( under 9 )\nReading Loop. The source data is provided in\ncolumns that span 30 minutes, eg:\n  00:00 to 00:30\n ... etc. This iterator loops over every column\nand inserts into the format we need, eg:\ntype, datetime, reading",
            "SOURCE_SCHEMA_NAME" : null,
            "TARGET_TABLE_NAME" : null,
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : null,
            "PARENT_SEQUENCE_ORDER" : 12,
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "TEMPLATE_NAME" : "STRING_ITERATOR",
            "ON_ERROR_CONTINUE" : 0,
            "TARGET_DB_NAME" : null,
            "VERIFIED" : 0
         },
         {
            "NOTES" : "11 ( under 10 )",
            "SOURCE_SCHEMA_NAME" : "staging",
            "SOURCE_TABLE_NAME" : "powershop_raw",
            "SOURCE_DB_NAME" : "powercom",
            "SEQUENCE_ORDER" : 14,
            "AUTOGENERATED" : 0,
            "CONNECTION_NAME" : "powercom",
            "ON_ERROR_CONTINUE" : 0,
            "TEMPLATE_NAME" : "GENERIC_SQL",
            "TARGET_DB_NAME" : "powercom",
            "VERIFIED" : 0,
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : "public",
            "PARENT_SEQUENCE_ORDER" : 13,
            "TARGET_TABLE_NAME" : "powercom_readings",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "ON_ERROR_CONTINUE" : 0,
            "TEMPLATE_NAME" : "SQL_ITERATOR",
            "VERIFIED" : 0,
            "TARGET_DB_NAME" : null,
            "TARGET_TABLE_NAME" : null,
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TARGET_SCHEMA_NAME" : null,
            "DISABLE_FLAG" : 0,
            "PARENT_SEQUENCE_ORDER" : 0,
            "SOURCE_TABLE_NAME" : "powershop_raw",
            "NOTES" : "12\nThis iterator is *just* for the calculated metrics: Solar Consumed.",
            "SOURCE_SCHEMA_NAME" : "staging",
            "CONNECTION_NAME" : "powercom",
            "SOURCE_DB_NAME" : "powercom",
            "SEQUENCE_ORDER" : 15,
            "AUTOGENERATED" : 0
         },
         {
            "BEGIN_TRANSACTION" : 0,
            "COMMIT_STEP" : 0,
            "ON_ERROR_CONTINUE" : 0,
            "TEMPLATE_NAME" : "GENERIC_SQL",
            "VERIFIED" : 0,
            "TARGET_DB_NAME" : "powercom",
            "TARGET_TABLE_NAME" : "powercom_readings",
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TARGET_SCHEMA_NAME" : null,
            "DISABLE_FLAG" : 0,
            "PARENT_SEQUENCE_ORDER" : 15,
            "SOURCE_TABLE_NAME" : "powercom_readings",
            "NOTES" : "13 ( under 12 )\nThis query aggregates the solar energy generated, into 30-minute intervals\n( note that there is generally 1 reading per minute for stats from the inverter ).\n\nIt then subtracts the amount of energy that we sold to the retailer from this aggregate\ngenerated, to arrive at an aggregate solar energy *consumed*.",
            "SOURCE_SCHEMA_NAME" : null,
            "CONNECTION_NAME" : "powercom",
            "SOURCE_DB_NAME" : "powercom",
            "SEQUENCE_ORDER" : 16,
            "AUTOGENERATED" : 0
         },
         {
            "AUTOGENERATED" : 0,
            "SOURCE_DB_NAME" : null,
            "SEQUENCE_ORDER" : 17,
            "CONNECTION_NAME" : "powercom",
            "SOURCE_SCHEMA_NAME" : null,
            "NOTES" : "14",
            "SOURCE_TABLE_NAME" : null,
            "PARENT_SEQUENCE_ORDER" : 0,
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : null,
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TARGET_TABLE_NAME" : null,
            "TARGET_DB_NAME" : "powercom",
            "VERIFIED" : 0,
            "TEMPLATE_NAME" : "STRING_ITERATOR",
            "ON_ERROR_CONTINUE" : 0,
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0
         },
         {
            "COMMIT_STEP" : 0,
            "BEGIN_TRANSACTION" : 0,
            "TARGET_DB_NAME" : "powercom",
            "VERIFIED" : 0,
            "ON_ERROR_CONTINUE" : 0,
            "TEMPLATE_NAME" : "GENERIC_SQL",
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TARGET_TABLE_NAME" : null,
            "PARENT_SEQUENCE_ORDER" : 17,
            "DISABLE_FLAG" : 0,
            "TARGET_SCHEMA_NAME" : null,
            "SOURCE_TABLE_NAME" : null,
            "SOURCE_SCHEMA_NAME" : null,
            "NOTES" : "15 ( under 14 )",
            "CONNECTION_NAME" : "powercom",
            "AUTOGENERATED" : 0,
            "SOURCE_DB_NAME" : null,
            "SEQUENCE_ORDER" : 18
         },
         {
            "SOURCE_TABLE_NAME" : null,
            "SOURCE_SCHEMA_NAME" : null,
            "NOTES" : "16\nCommit. The 'select 1' isn't used, other than a placeholder for the\ncurrent step/connection, which we're issuing a 'commit' against.",
            "CONNECTION_NAME" : "powercom",
            "AUTOGENERATED" : 0,
            "SOURCE_DB_NAME" : "powercom",
            "SEQUENCE_ORDER" : 19,
            "COMMIT_STEP" : 1,
            "BEGIN_TRANSACTION" : 0,
            "VERIFIED" : 0,
            "TARGET_DB_NAME" : null,
            "TEMPLATE_NAME" : "GENERIC_SQL",
            "ON_ERROR_CONTINUE" : 0,
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "TARGET_TABLE_NAME" : null,
            "PARENT_SEQUENCE_ORDER" : 0,
            "TARGET_SCHEMA_NAME" : null,
            "DISABLE_FLAG" : 0
         }
      ],
      "pre" : [
         "delete from config where processing_group_name = 'powershop_dev'"
      ]
   },
   "harvest_control" : {
      "data" : [],
      "pre" : [
         "delete from harvest_control where processing_group_name = 'powershop_dev'"
      ]
   },
   "param_value" : {
      "pre" : [
         "delete from param_value where processing_group_name = 'powershop_dev'"
      ],
      "data" : [
         {
            "PARAM_NAME" : "#P_SQL#",
            "SEQUENCE_ORDER" : 1,
            "PARAM_VALUE" : "select\n    to_char( max( powershop_raw.date ) - interval '7 day', 'DD/MM/YYYY' ) as DATE_FROM\n--    to_char( max( powershop_raw.date ), 'DD/MM/YYYY' )                    as DATE_FROM\n  , to_char( current_date , 'DD/MM/YYYY' )              as DATE_TO\nfrom  \"public\".\"powershop_raw\"",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_VALUE" : "powershop",
            "SEQUENCE_ORDER" : 2,
            "PARAM_NAME" : "#P_COOKIE_JAR_NAME#"
         },
         {
            "PARAM_NAME" : "#P_URL#",
            "SEQUENCE_ORDER" : 2,
            "PARAM_VALUE" : "https://secure.powershop.com.au/",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PARAM_VALUE" : "{\n    \"email\": \"d.j.kasak.dk@gmail.com\"\n  , \"password\": \"telepath\"\n}",
            "SEQUENCE_ORDER" : 2,
            "PARAM_NAME" : "#P_FORM_FIELDS_JSON#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PARAM_NAME" : "#P_OUTPUT_FILENAME#",
            "SEQUENCE_ORDER" : 3,
            "PARAM_VALUE" : "/tmp/#ENV_JOB_ID#.csv",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_NAME" : "#P_COOKIE_JAR_NAME#",
            "SEQUENCE_ORDER" : 3,
            "PARAM_VALUE" : "powershop"
         },
         {
            "SEQUENCE_ORDER" : 3,
            "PARAM_VALUE" : "{\n    \"from\": \"#Q_DATE_FROM#\"\n  , \"to\":   \"#Q_DATE_TO#\"\n}",
            "PARAM_NAME" : "#P_FORM_FIELDS_JSON#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PARAM_NAME" : "#P_URL#",
            "PARAM_VALUE" : "https://secure.powershop.com.au/usage_report",
            "SEQUENCE_ORDER" : 3,
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_VALUE" : "\\",
            "SEQUENCE_ORDER" : 4,
            "PARAM_NAME" : "#P_ESCAPE_CHAR#"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_VALUE" : "/tmp/#ENV_JOB_ID#.csv",
            "SEQUENCE_ORDER" : 4,
            "PARAM_NAME" : "#P_FILE_NAME#"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "SEQUENCE_ORDER" : 4,
            "PARAM_VALUE" : "0",
            "PARAM_NAME" : "#P_REQUIRE_TRAILING_NEWLINE#"
         },
         {
            "PARAM_NAME" : "#P_INCLUDES_HEADERS#",
            "PARAM_VALUE" : "1",
            "SEQUENCE_ORDER" : 4,
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_NAME" : "#P_FILE_NAME#",
            "PARAM_VALUE" : "/tmp/#ENV_JOB_ID#.csv.good",
            "SEQUENCE_ORDER" : 6
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_NAME" : "#P_INCLUDES_HEADER#",
            "PARAM_VALUE" : "1",
            "SEQUENCE_ORDER" : 6
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_NAME" : "#P_ESCAPE_CHAR#",
            "SEQUENCE_ORDER" : 6,
            "PARAM_VALUE" : "\\"
         },
         {
            "PARAM_NAME" : "#P_DELIMITER#",
            "SEQUENCE_ORDER" : 6,
            "PARAM_VALUE" : ",",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_NAME" : "#P_DATESTYLE#",
            "SEQUENCE_ORDER" : 6,
            "PARAM_VALUE" : "DMY"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_VALUE" : "select\n    date\nfrom\n    #CONFIG_SOURCE_SCHEMA_NAME#.#CONFIG_SOURCE_TABLE_NAME#\ngroup by\n    date",
            "SEQUENCE_ORDER" : 7,
            "PARAM_NAME" : "#P_SQL#"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_NAME" : "#P_ITERATOR#",
            "PARAM_VALUE" : "DATES",
            "SEQUENCE_ORDER" : 7
         },
         {
            "PARAM_VALUE" : "delete from #CONFIG_TARGET_SCHEMA_NAME#.#CONFIG_TARGET_TABLE_NAME#\nwhere date = '#I_DATES.DATE#'",
            "SEQUENCE_ORDER" : 8,
            "PARAM_NAME" : "#P_SQL#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PARAM_NAME" : "#P_ITERATOR#",
            "SEQUENCE_ORDER" : 9,
            "PARAM_VALUE" : "TYPE_LOOP",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "SEQUENCE_ORDER" : 9,
            "PARAM_VALUE" : "TYPE\nConsumption\nControlled Load Consumption\nGeneration\nSolar Consumed",
            "PARAM_NAME" : "#P_STRING#"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "SEQUENCE_ORDER" : 10,
            "PARAM_VALUE" : "delete from #CONFIG_TARGET_SCHEMA_NAME#.#CONFIG_TARGET_TABLE_NAME#\nwhere\n    reading_datetime::DATE = '#I_DATES.DATE#'\nand reading_type = '#I_TYPE_LOOP.TYPE#'",
            "PARAM_NAME" : "#P_SQL#"
         },
         {
            "PARAM_NAME" : "#P_TARGET_COLUMNS#",
            "SEQUENCE_ORDER" : 11,
            "PARAM_VALUE" : "#COMPLEX_COLUMNS_FROM_SOURCE:SKIP_SOURCE_FORMATTING#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PARAM_NAME" : "#P_SOURCE_COLUMNS#",
            "SEQUENCE_ORDER" : 11,
            "PARAM_VALUE" : "#COMPLEX_COLUMNS_FROM_SOURCE:SKIP_SOURCE_FORMATTING#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PARAM_NAME" : "#P_ITERATOR#",
            "PARAM_VALUE" : "TYPE_LOOP",
            "SEQUENCE_ORDER" : 12,
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PARAM_NAME" : "#P_STRING#",
            "PARAM_VALUE" : "TYPE\nConsumption\nControlled Load Consumption\nGeneration",
            "SEQUENCE_ORDER" : 12,
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PARAM_VALUE" : "READING_DATETIME,COLUMN\n00:00,r_00_00__00_30\n00:30,r_00_30__01_00\n01:00,r_01_00__01_30\n01:30,r_01_30__02_00\n02:00,r_02_00__02_30\n02:30,r_02_30__03_00\n03:00,r_03_00__03_30\n03:30,r_03_30__04_00\n04:00,r_04_00__04_30\n04:30,r_04_30__05_00\n05:00,r_05_00__05_30\n05:30,r_05_30__06_00\n06:00,r_06_00__06_30\n06:30,r_06_30__07_00\n07:00,r_07_00__07_30\n07:30,r_07_30__08_00\n08:00,r_08_00__08_30\n08:30,r_08_30__09_00\n09:00,r_09_00__09_30\n09:30,r_09_30__10_00\n10:00,r_10_00__10_30\n10:30,r_10_30__11_00\n11:00,r_11_00__11_30\n11:30,r_11_30__12_00\n12:00,r_12_00__12_30\n12:30,r_12_30__13_00\n13:00,r_13_00__13_30\n13:30,r_13_30__14_00\n14:00,r_14_00__14_30\n14:30,r_14_30__15_00\n15:00,r_15_00__15_30\n15:30,r_15_30__16_00\n16:00,r_16_00__16_30\n16:30,r_16_30__17_00\n17:00,r_17_00__17_30\n17:30,r_17_30__18_00\n18:00,r_18_00__18_30\n18:30,r_18_30__19_00\n19:00,r_19_00__19_30\n19:30,r_19_30__20_00\n20:00,r_20_00__20_30\n20:30,r_20_30__21_00\n21:00,r_21_00__21_30\n21:30,r_21_30__22_00\n22:00,r_22_00__22_30\n22:30,r_22_30__23_00\n23:00,r_23_00__23_30\n23:30,r_23_30__00_00",
            "SEQUENCE_ORDER" : 13,
            "PARAM_NAME" : "#P_STRING#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "SEQUENCE_ORDER" : 13,
            "PARAM_VALUE" : "READING_LOOP",
            "PARAM_NAME" : "#P_ITERATOR#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "SEQUENCE_ORDER" : 14,
            "PARAM_VALUE" : "insert into \"public\".\"powercom_readings\"\n(\n    reading_datetime\n  , reading_type\n  , watts\n) select\n    ( date || ' ' || '#I_READING_LOOP.READING_DATETIME#' )::TIMESTAMP\n  , '#I_TYPE_LOOP.TYPE#'\n  , #I_READING_LOOP.COLUMN# * 1000 -- figures are in kW, and we want watts\nfrom #CONFIG_SOURCE_SCHEMA_NAME#.#CONFIG_SOURCE_TABLE_NAME#\nwhere con_gen = '#I_TYPE_LOOP.TYPE#'",
            "PARAM_NAME" : "#P_SQL#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PARAM_VALUE" : "select\n    date\nfrom\n    #CONFIG_SOURCE_SCHEMA_NAME#.#CONFIG_SOURCE_TABLE_NAME#\ngroup by\n    date",
            "SEQUENCE_ORDER" : 15,
            "PARAM_NAME" : "#P_SQL#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "SEQUENCE_ORDER" : 15,
            "PARAM_VALUE" : "DATES",
            "PARAM_NAME" : "#P_ITERATOR#"
         },
         {
            "PARAM_NAME" : "#P_SQL#",
            "PARAM_VALUE" : "insert into \"public\".\"powercom_readings\"\n(\n    reading_datetime\n  , reading_type\n  , watts\n) select\n    powercom_readings.reading_datetime                    as reading_datetime\n  , 'Solar Consumed'\n  , aggregated_inverter_stats.generated_watts - powercom_readings.watts as solar_consumed_watts\nfrom\n            public.powercom_readings                      as powercom_readings\ninner join (\n\twith intervals as (\n\t\tselect\n\t\t    (n||' minutes')::interval       as start_time\n\t\t  , ((n+30)|| ' minutes')::interval as end_time\n\t\tfrom generate_series(0, (23*60+30), 30) n\n\t)\n\tselect\n\t\t        '#I_DATES.DATE#'::DATE + i.start_time as gen_datetime\n\t\t      , ( max( readings.accumulated_energy ) - min( readings.accumulated_energy ) ) * 1000 as generated_watts\n\tfrom\n\t\t        intervals i\n\tleft join   \"public\".\"readings\"\n\t\t                                    on readings.reading_datetime::TIME >= i.start_time and readings.reading_datetime::TIME < i.end_time\n\twhere readings.reading_datetime::DATE = '#I_DATES.DATE#'\n\tgroup by i.start_time, i.end_time\n\torder by i.start_time\n) as aggregated_inverter_stats\n                                on powercom_readings.reading_datetime = aggregated_inverter_stats.gen_datetime\nwhere\n    powercom_readings.reading_datetime::DATE = '#I_DATES.DATE#'\nand powercom_readings.reading_type = 'Generation'",
            "SEQUENCE_ORDER" : 16,
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_NAME" : "#P_ITERATOR#",
            "SEQUENCE_ORDER" : 17,
            "PARAM_VALUE" : "MATERIALIZED_VIEWS"
         },
         {
            "SEQUENCE_ORDER" : 17,
            "PARAM_VALUE" : "NAME\nmvw_daily_summary_consumption\nmvw_daily_summary_controlled_load\nmvw_daily_summary_export\nmvw_daily_summary_off_peak\nmvw_daily_summary_peak\nmvw_daily_summary_production\nmvw_daily_summary_shoulder\nmvw_daily_summary_solar_consumption",
            "PARAM_NAME" : "#P_STRING#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "SEQUENCE_ORDER" : 18,
            "PARAM_VALUE" : "refresh materialized view #I_MATERIALIZED_VIEWS.NAME#",
            "PARAM_NAME" : "#P_SQL#",
            "PROCESSING_GROUP_NAME" : "powershop_dev"
         },
         {
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "PARAM_NAME" : "#P_SQL#",
            "SEQUENCE_ORDER" : 19,
            "PARAM_VALUE" : "select 1"
         }
      ]
   },
   "processing_group" : {
      "pre" : [
         "delete from processing_group where processing_group_name = 'powershop_dev'"
      ],
      "data" : [
         {
            "PROCESSING_GROUP_DESCRIPTION" : null,
            "TAGS" : null,
            "PROCESSING_GROUP_NAME" : "powershop_dev",
            "DISABLE_FLAG" : 0,
            "CUSTOM_ARGS" : "",
            "TEMPLATE" : 0,
            "NOTES" : null,
            "REPOSITORY" : "sdf_powercom"
         }
      ]
   }
}
